{% if error %}
<div class="bg-red-50 border border-red-200 rounded-lg p-4">
    <p class="text-red-700">{{ error }}</p>
</div>
{% elif comparison %}
<div class="space-y-4">
    <!-- Verdict Banner -->
    <div class="rounded-lg p-4
        {% if comparison.comparison.verdict == 'better' %}bg-green-100 border border-green-300
        {% elif comparison.comparison.verdict == 'worse' %}bg-red-100 border border-red-300
        {% else %}bg-blue-100 border border-blue-300{% endif %}">
        <div class="flex items-center justify-between">
            <div>
                <span class="text-2xl font-bold
                    {% if comparison.comparison.verdict == 'better' %}text-green-700
                    {% elif comparison.comparison.verdict == 'worse' %}text-red-700
                    {% else %}text-blue-700{% endif %}">
                    {{ comparison.comparison.verdict_label }}
                </span>
                {% if comparison.comparison.row_diff != 0 %}
                <span class="ml-3 text-sm
                    {% if comparison.comparison.row_diff > 0 %}text-red-600
                    {% else %}text-green-600{% endif %}">
                    {% if comparison.comparison.row_diff > 0 %}
                        +{{ comparison.comparison.row_diff }} rows ({{ comparison.comparison.row_diff_pct }}% more)
                    {% else %}
                        {{ comparison.comparison.row_diff }} rows ({{ comparison.comparison.row_diff_pct|abs }}% fewer)
                    {% endif %}
                </span>
                {% endif %}
            </div>
            <span class="text-4xl">
                {% if comparison.comparison.verdict == 'better' %}&#9989;
                {% elif comparison.comparison.verdict == 'worse' %}&#10060;
                {% else %}&#128260;{% endif %}
            </span>
        </div>
    </div>

    <!-- Side by Side Comparison -->
    <div class="grid md:grid-cols-2 gap-4">
        <!-- MySQL's Choice -->
        <div class="border rounded-lg overflow-hidden">
            <div class="bg-indigo-50 px-4 py-2 border-b">
                <h4 class="font-semibold text-indigo-800">MySQL's Choice</h4>
            </div>
            <div class="p-4 space-y-2">
                <div class="flex justify-between">
                    <span class="text-gray-600">Index:</span>
                    <span class="font-mono font-medium">{{ comparison.mysql_choice.index or 'None' }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Access Type:</span>
                    <span class="px-2 py-0.5 rounded text-xs font-medium
                        {% if comparison.mysql_choice.access_type in ['const', 'eq_ref', 'ref', 'range'] %}bg-green-100 text-green-700
                        {% elif comparison.mysql_choice.access_type == 'index' %}bg-yellow-100 text-yellow-700
                        {% else %}bg-red-100 text-red-700{% endif %}">
                        {{ comparison.mysql_choice.access_type }}
                    </span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Rows Examined:</span>
                    <span class="font-mono">{{ comparison.mysql_choice.rows }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Cost Score:</span>
                    <span class="font-mono text-sm">{{ comparison.mysql_choice.cost }}</span>
                </div>
            </div>
        </div>

        <!-- Your Selection -->
        <div class="border rounded-lg overflow-hidden
            {% if comparison.comparison.verdict == 'worse' %}border-red-300
            {% elif comparison.comparison.verdict == 'better' %}border-green-300{% endif %}">
            <div class="px-4 py-2 border-b
                {% if comparison.comparison.verdict == 'worse' %}bg-red-50
                {% elif comparison.comparison.verdict == 'better' %}bg-green-50
                {% else %}bg-gray-50{% endif %}">
                <h4 class="font-semibold
                    {% if comparison.comparison.verdict == 'worse' %}text-red-800
                    {% elif comparison.comparison.verdict == 'better' %}text-green-800
                    {% else %}text-gray-800{% endif %}">Your Selection</h4>
            </div>
            <div class="p-4 space-y-2">
                <div class="flex justify-between">
                    <span class="text-gray-600">Index:</span>
                    <span class="font-mono font-medium">{{ comparison.your_choice.index }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Access Type:</span>
                    <span class="px-2 py-0.5 rounded text-xs font-medium
                        {% if comparison.your_choice.access_type in ['const', 'eq_ref', 'ref', 'range'] %}bg-green-100 text-green-700
                        {% elif comparison.your_choice.access_type == 'index' %}bg-yellow-100 text-yellow-700
                        {% else %}bg-red-100 text-red-700{% endif %}">
                        {{ comparison.your_choice.access_type }}
                    </span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Rows Examined:</span>
                    <span class="font-mono">{{ comparison.your_choice.rows }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Cost Score:</span>
                    <span class="font-mono text-sm">{{ comparison.your_choice.cost }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Explanation -->
    <div class="bg-gray-50 rounded-lg p-4">
        <div class="font-medium text-gray-700 mb-2">Why?</div>
        <p class="text-gray-600">{{ comparison.your_choice.reason }}</p>
    </div>
</div>
{% else %}
<div class="text-center text-gray-500 py-4">
    <span class="text-sm">Select an index to see comparison</span>
</div>
{% endif %}
